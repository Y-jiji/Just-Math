---
20220729--0000000 : 章节已创建
---
# 语义函数

## ${\rm inst}$ 关键字 [SYM]
::::文字::::
inst关键字被用来定义值. 
::::形式::::
$$
\text{\inst: \{name\} := \{value\}}
$$

## 等号 [SYM]
单例类型具有良定的等号, 任意多单例类型的类型余积, 也有良定的等号. 

## 函数应用 [SYM]
::::文字::::
用空格来表示函数应用, 一个函数应用的表达式 $x\;y$ 是合法的, 当且仅当 $x$ 的类型 $\mathtt{T \to A}$ 使得 $y$ 是 $\mathtt{T}$ 类型的. 
::::形式::::
$$
\rm \{value\;expression\}\;\{value\;expression\}
$$

## 值抽象 [SYM]
::::文字::::
抽象算符写作一个冒号. 前面是变量名和类型标注, 后面是关于变量的表达式. 
::::形式::::
$$
\rm \{name\;or\;cons\;expression\;of\;names\}\oftype{\{\rm type\;notation\}}:\{value\;expression\}
$$

## 值类型匹配 [SYM]
::::文字::::
给定一个含若干个未知类型的类型表达式和一个值. 
是否存在一组未知类型的取值方式, 使得这个值符合这个类型? 如果存在, 如何找到最小类型? 这个问题称为值类型匹配问题. 
接下来用结构归纳来解决它. 
讨论函数类型. 即问题 $\mathtt{f::A?\to B?}$ , 其中带问号的变量是未知变量. 此时最小类型即 $\mathtt{f}$ 的'定义域'和'值域'. 
类型 $\mathtt{A}$ 必须是 $\mathtt{f}$ 定义域的子类型. 否则存在 $\mathtt{A}$ 类型的值不能作为 $\mathtt{f}$ 的输入. 而 $\tt A?\to B?$ 的类型大小关于 $\mathtt{A}$ 是逆变的, 故最小的取法就是 $\mathtt{A}$ 为定义域. 
类型 $\mathtt{B}$ 必须是 $\mathtt{f}$ 取值范围的父类型. 故最小的取法是 $\mathtt{B}$ 为值域. 
余积类型不好讨论, 放弃, 它不出现的值类型匹配的未知参数中. 
对构造子, 取最大的办法是每个子表达式取最大, 取最小的办法是每个子表达式取最小. 

## 泛型函数 [SYM]
::::文字::::
泛型函数通过值类型匹配的方式确定输入参数的类型(用一个模式串来取代固定的类型标注), 并用它来确定返回表达式的类型. 
